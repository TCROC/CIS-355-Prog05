<!DOCTYPE html>
<head>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <meta charset='UTF-8'>
    <link href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css' rel='stylesheet'>
    <script src='https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js'></script>
    <style>label {width: 5em;}</style>
</head>
<html>
<body onload="loadDoc()">

<div id="htmlDiv">
</div>

<script>
    function loadDoc() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                var redirect = false;
                try {
                    var response = JSON.parse(this.responseText);
                    if (response.location) {
                        window.location.href = response.location;
                        redirect = true;
                    }
                } catch {

                }

                if (!redirect)
                    document.getElementById("htmlDiv").innerHTML = this.responseText;
            }
        };
        xhttp.open("GET", "customer.php" + window.location.search, true);
        xhttp.send();
    }

    function readURL(input) {
        if (input.files[0].size > 1000000) {
            input.value = null;
            alert("The picture cannot be larger than 1MB in size!");
        }
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#imgDisplay').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        } else {
            $('#imgDisplay').attr('src', null);
        }
    }

    // Code taken from https://canvas.svsu.edu/courses/28460/files/folder/_file_upload
    var _validFileExtensions = [".jpg", ".jpeg", ".gif", ".png"];
    function Validate(oForm) {
        var arrInputs = oForm.getElementsByTagName("input");
        for (var i = 0; i < arrInputs.length; i++) {
            var oInput = arrInputs[i];
            if (oInput.type == "file") {
                var sFileName = oInput.value;
                if (sFileName.length > 0) {
                    var blnValid = false;
                    for (var j = 0; j < _validFileExtensions.length; j++) {
                        var sCurExtension = _validFileExtensions[j];
                        if (sFileName.substr(sFileName.length - sCurExtension.length, sCurExtension.length).toLowerCase() == sCurExtension.toLowerCase()) {
                            blnValid = true;
                            break;
                        }
                    }

                    if (!blnValid) {
                        alert("Sorry, " + sFileName + " is invalid, allowed extensions are: " + _validFileExtensions.join(", "));
                        return false;
                    }

                }
            }
        }

        return true;
    }

</script>

</body>
</html>
